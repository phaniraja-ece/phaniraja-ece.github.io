<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chess Analyzer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <!-- Chess.js for PGN parsing and board state -->
  <script src="https://cdn.jsdelivr.net/npm/chess.js@1.0.0/dist/chess.min.js"></script>
</head>
<body>
  <header class="header">
    <h1>Chess Game Analyzer</h1>
    <p>Upload a PGN to analyze moves, assign symbols, and visualize evaluations.</p>
  </header>

  <main class="layout">
    <section class="controls">
      <textarea id="pgnInput" placeholder="Paste PGN here..." rows="8"></textarea>
      <div class="row">
        <label for="depth"><strong>Depth:</strong></label>
        <input id="depth" type="number" min="8" max="30" value="18" />
        <label for="multipv"><strong>MultiPV:</strong></label>
        <input id="multipv" type="number" min="1" max="3" value="1" />
      </div>
      <div class="row">
        <button id="analyzeBtn">Analyze</button>
        <button id="clearBtn">Clear</button>
      </div>

      <div class="nav">
        <button id="prevBtn">Prev</button>
        <span id="moveIndicator">Move 0/0</span>
        <button id="nextBtn">Next</button>
      </div>

      <div class="summary">
        <div><strong>Brilliant (!!):</strong> <span id="countBrilliant">0</span></div>
        <div><strong>Excellent (!):</strong> <span id="countExcellent">0</span></div>
        <div><strong>Great (= top):</strong> <span id="countGreat">0</span></div>
        <div><strong>Good:</strong> <span id="countGood">0</span></div>
        <div><strong>Inaccuracy (?!):</strong> <span id="countInaccuracy">0</span></div>
        <div><strong>Mistake (?):</strong> <span id="countMistake">0</span></div>
        <div><strong>Blunder (??):</strong> <span id="countBlunder">0</span></div>
      </div>
    </section>

    <section class="eval-panel">
      <h2>Evaluation bar</h2>
      <div class="eval-bar">
        <div id="evalFill" class="eval-fill"></div>
        <div class="eval-scale">
          <span>-10</span><span>-5</span><span>0</span><span>+5</span><span>+10</span>
        </div>
      </div>
      <div class="eval-info">
        <div><strong>Eval:</strong> <span id="evalText">0.00</span></div>
        <div><strong>Side to move:</strong> <span id="sideText">White</span></div>
      </div>

      <h2>Move details</h2>
      <table class="moves">
        <thead>
          <tr>
            <th>#</th>
            <th>Move (SAN)</th>
            <th>Symbol</th>
            <th>CPL</th>
            <th>Best move</th>
            <th>PV</th>
            <th>Eval</th>
          </tr>
        </thead>
        <tbody id="movesBody"></tbody>
      </table>
    </section>
  </main>

  <!-- Stockfish WASM (you may host locally if preferred) -->
  <script>
    // Pick one of these sources:
    // 1) Known WASM build (fast); if it fails in your environment, host locally.
    window.STOCKFISH_PATH = "https://cdn.jsdelivr.net/gh/niklasf/stockfish.wasm/stockfish.wasm.js";
    // If you host locally, place stockfish.wasm.js next to analyzer.js and set:
    // window.STOCKFISH_PATH = "stockfish.wasm.js";
  </script>
  <script src="analyzer.js"></script>
</body>
</html>
